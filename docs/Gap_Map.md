# FSRI-Lite: v0.1 to v1.0 Gap Map

**Executive Summary:** This document outlines the key gaps between the current FSRI-Lite v0.1 prototype and the target v1.0 production system. The analysis is structured across four domains: Data & Features, Modeling & Scoring, Infrastructure & Operations, and Testing & Validation. The most critical gaps are the lack of historical data pipelines, the reliance on heuristics instead of predictive models, the absence of a configuration management system, and a complete lack of automated testing. Closing these gaps is essential for building a reliable, maintainable, and intelligent system.

---

| Domain | Current State (v0.1) | Target State (v1.0) | Gap & Priority |
| :--- | :--- | :--- | :--- |
| **Data & Features** | Relies on real-time API calls for forecast/current data only. No historical data is ingested or stored. | Ingests and stores historical data (USGS, Weather) to build features like moving averages, deltas, and drought indices (SPI). | **Critical Gap.** The system cannot learn from the past. Building historical data ingestion pipelines is a **High** priority. |
| | Feature set is minimal, based on raw data points (e.g., current gauge height). | Features are engineered to capture trends, seasonality, and complex interactions (e.g., 7-day precipitation forecast vs. 30-day gauge trend). | **Significant Gap.** The current features limit predictive power. Feature engineering is a **High** priority, dependent on closing the data gap. |
| **Modeling & Scoring** | All scoring is based on hard-coded, linear heuristics and fixed thresholds. | A calibrated logistic regression model predicts movement disruption probability. Heuristics are replaced or augmented with simple, interpretable models. | **Critical Gap.** The system is static and cannot adapt. Implementing the ML model from the Active Learning Design is a **High** priority. |
| | A simple Kalman filter provides linear projections for horizons. | Models provide probabilistic forecasts. An active learning loop is in place to gather human feedback on uncertain predictions. | **Significant Gap.** The current horizon forecast is naive. The active learning loop is key to long-term improvement and is a **Medium** priority for initial implementation. |
| **Infrastructure & Operations** | Configuration (weights, thresholds, API keys) is scattered across `.env` and `.py` files. | All non-secret configuration is centralized in a single `config.yaml` file, loaded at startup. | **Critical Gap.** The current setup is brittle and hard to maintain. Implementing config-as-code is a **High** priority for improving velocity and stability. |
| | No logging beyond stdout/stderr. No monitoring or alerting. | Structured logging (e.g., JSON format) is implemented. Basic monitoring is in place for API uptime, error rates, and data source latency. | **Significant Gap.** The system is a black box when deployed. Implementing structured logging is a **Medium** priority. |
| | Manual deployment process. Secrets are managed in a plaintext `.env` file. | Deployment is automated (e.g., via GitHub Actions). Secrets are managed securely (e.g., via Doppler, HashiCorp Vault, or GitHub Secrets). | **Moderate Gap.** Current setup is acceptable for a single developer but not for a team or production environment. This is a **Medium** priority. |
| **Testing & Validation** | Zero automated tests (unit, integration, or end-to-end). | A test harness exists with unit tests for all scoring functions and integration tests for data source connections and the main API endpoints. | **Critical Gap.** There is no guarantee that a code change won't break the system. Building the test harness is a **High** priority. |
| | No backtesting framework to evaluate scoring changes against historical events. | A `backtest.py` script can run the FSRI model against historical dates to evaluate the impact of model or feature changes on past known events. | **Significant Gap.** We cannot quantitatively measure if a change is an improvement. Expanding the existing `backtest.py` is a **Medium** priority. |
